import {
    EmailJSResponseStatus
} from '../models/EmailJSResponseStatus';
import {
    store
} from '../store/store';
export var sendPost = function sendPost(url, data) {
    var headers = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
    return new Promise(function(resolve, reject) {
        var xhr = new XMLHttpRequest();
        xhr.addEventListener('load', function(_ref) {
            var target = _ref.target;
            var responseStatus = new EmailJSResponseStatus(target);

            if (responseStatus.status === 200 || responseStatus.text === 'OK') {
                resolve(responseStatus);
            } else {
                reject(responseStatus);
            }
        });
        xhr.addEventListener('error', function(_ref2) {
            var target = _ref2.target;
            reject(new EmailJSResponseStatus(target));
        });
        xhr.open('POST', store._origin + url, true);
        Object.keys(headers).forEach(function(key) {
            xhr.setRequestHeader(key, headers[key]);
        });
        xhr.send(data);
    });
};